{
	"openapi": "3.0.0",
	"info": {
		"title": "TáComQuem API",
		"description": "API para gestão de empréstimos pessoais entre amigos",
		"version": "1.0.0",
		"contact": { "name": "TáComQuem" }
	},
	"components": {
		"securitySchemes": {
			"BearerAuth": {
				"type": "http",
				"scheme": "bearer",
				"bearerFormat": "JWT",
				"description": "JWT authentication token. Format: Bearer {token}"
			}
		},
		"schemas": {}
	},
	"paths": {
		"/api/health": {
			"get": {
				"tags": ["Health"],
				"description": "Check API health status",
				"responses": {
					"200": {
						"description": "API is healthy",
						"content": {
							"application/json": {
								"schema": {
									"description": "API is healthy",
									"type": "object",
									"properties": {
										"status": { "type": "string" },
										"timestamp": { "type": "string", "format": "date-time" }
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/health/db": {
			"get": {
				"tags": ["Health"],
				"description": "Check database connection",
				"responses": {
					"200": {
						"description": "Database status",
						"content": {
							"application/json": {
								"schema": {
									"description": "Database status",
									"type": "object",
									"properties": {
										"status": { "type": "string", "enum": ["ok", "error"] },
										"database": {
											"type": "string",
											"enum": ["connected", "disconnected"]
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/register": {
			"post": {
				"tags": ["Authentication"],
				"description": "Register a new user with email and password",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["name", "email", "password"],
								"properties": {
									"name": {
										"type": "string",
										"minLength": 2,
										"maxLength": 100,
										"description": "User full name"
									},
									"email": {
										"type": "string",
										"format": "email",
										"description": "User email address"
									},
									"password": {
										"type": "string",
										"minLength": 8,
										"description": "User password (min 8 characters)"
									}
								}
							}
						}
					},
					"required": true
				},
				"responses": {
					"201": {
						"description": "User registered successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "User registered successfully",
									"type": "object",
									"properties": {
										"message": { "type": "string" },
										"user": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"name": { "type": "string" },
												"email": { "type": "string" },
												"avatarUrl": { "type": "string", "nullable": true },
												"emailVerified": { "type": "boolean" },
												"role": {
													"type": "string",
													"enum": [
														"USER",
														"ANALYST",
														"SUPPORT",
														"MODERATOR",
														"SUPER_ADMIN"
													]
												}
											}
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Invalid input or email already registered",
						"content": {
							"application/json": {
								"schema": {
									"description": "Invalid input or email already registered",
									"type": "object",
									"properties": {
										"error": {
											"oneOf": [{ "type": "string" }, { "type": "object" }]
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/login": {
			"post": {
				"tags": ["Authentication"],
				"description": "Authenticate with email and password",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["email", "password"],
								"properties": {
									"email": {
										"type": "string",
										"format": "email",
										"description": "User email address"
									},
									"password": {
										"type": "string",
										"description": "User password"
									}
								}
							}
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Authentication successful",
						"content": {
							"application/json": {
								"schema": {
									"description": "Authentication successful",
									"type": "object",
									"properties": {
										"user": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"name": { "type": "string" },
												"email": { "type": "string" },
												"avatarUrl": { "type": "string", "nullable": true },
												"emailVerified": { "type": "boolean" },
												"role": {
													"type": "string",
													"enum": [
														"USER",
														"ANALYST",
														"SUPPORT",
														"MODERATOR",
														"SUPER_ADMIN"
													]
												}
											}
										},
										"accessToken": {
											"type": "string",
											"description": "JWT access token (7 days)"
										},
										"refreshToken": {
											"type": "string",
											"description": "JWT refresh token (30 days)"
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Invalid credentials",
						"content": {
							"application/json": {
								"schema": {
									"description": "Invalid credentials",
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/verify-email": {
			"post": {
				"tags": ["Authentication"],
				"description": "Verify email address with token sent via email",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["token"],
								"properties": {
									"token": {
										"type": "string",
										"description": "Email verification token"
									}
								}
							}
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Email verified successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Email verified successfully",
									"type": "object",
									"properties": { "message": { "type": "string" } }
								}
							}
						}
					},
					"400": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": {
								"schema": {
									"description": "Invalid or expired token",
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/forgot-password": {
			"post": {
				"tags": ["Authentication"],
				"description": "Request password reset email",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["email"],
								"properties": {
									"email": {
										"type": "string",
										"format": "email",
										"description": "User email address"
									}
								}
							}
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Password reset email sent (always returns success for security)",
						"content": {
							"application/json": {
								"schema": {
									"description": "Password reset email sent (always returns success for security)",
									"type": "object",
									"properties": { "message": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/reset-password": {
			"post": {
				"tags": ["Authentication"],
				"description": "Reset password with token from email",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["token", "password"],
								"properties": {
									"token": {
										"type": "string",
										"description": "Password reset token"
									},
									"password": {
										"type": "string",
										"minLength": 8,
										"description": "New password (min 8 characters)"
									}
								}
							}
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "Password reset successful",
						"content": {
							"application/json": {
								"schema": {
									"description": "Password reset successful",
									"type": "object",
									"properties": { "message": { "type": "string" } }
								}
							}
						}
					},
					"400": {
						"description": "Invalid or expired token",
						"content": {
							"application/json": {
								"schema": {
									"description": "Invalid or expired token",
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/refresh": {
			"post": {
				"tags": ["Authentication"],
				"description": "Refresh access token using refresh token",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Token refreshed successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Token refreshed successfully",
									"type": "object",
									"properties": {
										"accessToken": {
											"type": "string",
											"description": "New JWT access token (7 days)"
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Invalid or expired refresh token",
						"content": {
							"application/json": {
								"schema": {
									"description": "Invalid or expired refresh token",
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/me": {
			"get": {
				"tags": ["Authentication"],
				"description": "Get current authenticated user",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "User profile",
						"content": {
							"application/json": {
								"schema": {
									"description": "User profile",
									"type": "object",
									"properties": {
										"user": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"name": { "type": "string" },
												"email": { "type": "string" },
												"avatarUrl": { "type": "string", "nullable": true },
												"emailVerified": { "type": "boolean" },
												"role": {
													"type": "string",
													"enum": [
														"USER",
														"ANALYST",
														"SUPPORT",
														"MODERATOR",
														"SUPER_ADMIN"
													]
												}
											}
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"description": "Unauthorized",
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": {
								"schema": {
									"description": "User not found",
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/auth/google": {
			"get": {
				"tags": ["Authentication", "OAuth"],
				"description": "Initiate Google OAuth flow",
				"responses": {
					"302": {
						"description": "Redirect to Google OAuth page",
						"content": {
							"application/json": {
								"schema": { "description": "Redirect to Google OAuth page" }
							}
						}
					}
				}
			}
		},
		"/api/auth/google/callback": {
			"get": {
				"tags": ["Authentication", "OAuth"],
				"description": "Google OAuth callback endpoint",
				"parameters": [
					{
						"schema": { "type": "string" },
						"in": "query",
						"name": "code",
						"required": false,
						"description": "OAuth authorization code"
					},
					{
						"schema": { "type": "string" },
						"in": "query",
						"name": "error",
						"required": false,
						"description": "OAuth error"
					}
				],
				"responses": {
					"302": {
						"description": "Redirect to frontend with tokens",
						"content": {
							"application/json": {
								"schema": { "description": "Redirect to frontend with tokens" }
							}
						}
					}
				}
			}
		},
		"/api/items/": {
			"post": {
				"tags": ["Items"],
				"description": "Create a new item",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["name"],
								"properties": {
									"name": { "type": "string", "description": "Item name" },
									"description": {
										"type": "string",
										"description": "Item description"
									},
									"images": {
										"type": "array",
										"items": { "type": "string", "format": "uri" },
										"description": "Array of image URLs"
									}
								}
							}
						}
					},
					"required": true
				},
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"201": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"item": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"name": { "type": "string" },
												"description": { "type": ["null", "string"] },
												"images": {
													"type": "array",
													"items": { "type": "string" }
												},
												"isActive": { "type": "boolean" },
												"createdAt": {
													"type": "string",
													"format": "date-time"
												},
												"updatedAt": { "type": "string", "format": "date-time" }
											}
										}
									}
								}
							}
						}
					}
				}
			},
			"get": {
				"tags": ["Items"],
				"description": "List all items owned by the current user",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"items": {
											"type": "array",
											"items": {
												"type": "object",
												"properties": {
													"id": { "type": "string", "format": "uuid" },
													"name": { "type": "string" },
													"description": { "type": ["null", "string"] },
													"images": {
														"type": "array",
														"items": { "type": "string" }
													},
													"isActive": { "type": "boolean" },
													"createdAt": {
														"type": "string",
														"format": "date-time"
													},
													"updatedAt": {
														"type": "string",
														"format": "date-time"
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/items/{id}": {
			"get": {
				"tags": ["Items"],
				"description": "Get a specific item by ID",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"item": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"name": { "type": "string" },
												"description": { "type": ["null", "string"] },
												"images": {
													"type": "array",
													"items": { "type": "string" }
												},
												"isActive": { "type": "boolean" },
												"createdAt": {
													"type": "string",
													"format": "date-time"
												},
												"updatedAt": { "type": "string", "format": "date-time" }
											}
										}
									}
								}
							}
						}
					},
					"404": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			},
			"patch": {
				"tags": ["Items"],
				"description": "Update an item",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"name": { "type": "string", "description": "Item name" },
									"description": {
										"type": "string",
										"description": "Item description"
									},
									"images": {
										"type": "array",
										"items": { "type": "string", "format": "uri" },
										"description": "Array of image URLs"
									}
								}
							}
						}
					}
				},
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"item": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"name": { "type": "string" },
												"description": { "type": ["null", "string"] },
												"images": {
													"type": "array",
													"items": { "type": "string" }
												},
												"isActive": { "type": "boolean" },
												"createdAt": {
													"type": "string",
													"format": "date-time"
												},
												"updatedAt": { "type": "string", "format": "date-time" }
											}
										}
									}
								}
							}
						}
					},
					"404": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			},
			"delete": {
				"tags": ["Items"],
				"description": "Delete an item (soft delete)",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"204": { "description": "Default Response" },
					"404": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/upload/images": {
			"post": {
				"tags": ["Upload"],
				"description": "Upload de múltiplas fotos (compacta para WebP)",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"images": {
											"type": "array",
											"items": {
												"type": "object",
												"properties": {
													"url": { "type": "string", "format": "uri" },
													"sizeBytes": { "type": "number" }
												}
											}
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Default Response",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": { "error": { "type": "string" } }
								}
							}
						}
					}
				}
			}
		},
		"/api/loans/": {
			"post": {
				"tags": ["Loans"],
				"description": "Create a new loan and generate a confirmation link",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["itemId", "borrowerEmail"],
								"properties": {
									"itemId": {
										"type": "string",
										"format": "uuid",
										"description": "Item ID"
									},
									"borrowerEmail": {
										"type": "string",
										"format": "email",
										"description": "Borrower email address"
									},
									"expectedReturnDate": {
										"type": "string",
										"format": "date-time",
										"description": "Expected return date (optional)"
									},
									"lenderNotes": {
										"type": "string",
										"description": "Lender notes (optional)"
									}
								}
							}
						}
					},
					"required": true
				},
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"201": {
						"description": "Loan created successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Loan created successfully",
									"type": "object",
									"properties": {
										"loan": {
											"type": "object",
											"properties": {
												"id": { "type": "string", "format": "uuid" },
												"itemId": { "type": "string", "format": "uuid" },
												"lenderId": { "type": "string", "format": "uuid" },
												"borrowerId": { "type": "string", "format": "uuid" },
												"status": { "type": "string" },
												"createdAt": { "type": "string", "format": "date-time" }
											}
										},
										"confirmUrl": {
											"type": "string",
											"description": "Public confirmation link"
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Invalid input or error creating loan",
						"content": {
							"application/json": {
								"schema": {
									"description": "Invalid input or error creating loan"
								}
							}
						}
					}
				}
			},
			"get": {
				"tags": ["Loans"],
				"description": "List all loans for the authenticated user",
				"parameters": [
					{
						"schema": {
							"type": "string",
							"enum": ["lent", "borrowed", "pending", "confirmed", "returned"]
						},
						"in": "query",
						"name": "filter",
						"required": false,
						"description": "Filter loans by status"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "List of loans",
						"content": {
							"application/json": {
								"schema": {
									"description": "List of loans",
									"type": "object",
									"properties": {
										"loans": {
											"type": "array",
											"items": {
												"type": "object",
												"properties": {
													"id": { "type": "string", "format": "uuid" },
													"itemId": { "type": "string", "format": "uuid" },
													"status": { "type": "string" },
													"createdAt": {
														"type": "string",
														"format": "date-time"
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/loans/{id}": {
			"get": {
				"tags": ["Loans"],
				"description": "Get loan details",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Loan ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Loan details",
						"content": {
							"application/json": {
								"schema": {
									"description": "Loan details",
									"type": "object",
									"properties": { "loan": { "type": "object" } }
								}
							}
						}
					},
					"404": {
						"description": "Loan not found",
						"content": {
							"application/json": {
								"schema": { "description": "Loan not found" }
							}
						}
					}
				}
			}
		},
		"/api/loans/{id}/return": {
			"patch": {
				"tags": ["Loans"],
				"description": "Mark a loan as returned",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Loan ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Loan marked as returned",
						"content": {
							"application/json": {
								"schema": {
									"description": "Loan marked as returned",
									"type": "object",
									"properties": { "loan": { "type": "object" } }
								}
							}
						}
					},
					"404": {
						"description": "Loan not found",
						"content": {
							"application/json": {
								"schema": { "description": "Loan not found" }
							}
						}
					}
				}
			}
		},
		"/api/loans/{id}/cancel": {
			"patch": {
				"tags": ["Loans"],
				"description": "Cancel a loan",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Loan ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"204": {
						"description": "Loan cancelled successfully",
						"content": {
							"application/json": {
								"schema": { "description": "Loan cancelled successfully" }
							}
						}
					},
					"404": {
						"description": "Loan not found",
						"content": {
							"application/json": {
								"schema": { "description": "Loan not found" }
							}
						}
					}
				}
			}
		},
		"/api/loans/{id}/remind": {
			"post": {
				"tags": ["Loans"],
				"description": "Send a reminder for a loan",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Loan ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Reminder sent successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Reminder sent successfully",
									"type": "object",
									"properties": { "message": { "type": "string" } }
								}
							}
						}
					},
					"404": {
						"description": "Loan not found",
						"content": {
							"application/json": {
								"schema": { "description": "Loan not found" }
							}
						}
					}
				}
			}
		},
		"/api/links/{token}": {
			"get": {
				"tags": ["Links"],
				"description": "Get public loan information via token (no authentication required)",
				"parameters": [
					{
						"schema": { "type": "string" },
						"in": "path",
						"name": "token",
						"required": true,
						"description": "Loan confirmation token"
					}
				],
				"responses": {
					"200": {
						"description": "Public loan information",
						"content": {
							"application/json": {
								"schema": {
									"description": "Public loan information",
									"type": "object"
								}
							}
						}
					},
					"404": {
						"description": "Invalid or expired link",
						"content": {
							"application/json": {
								"schema": { "description": "Invalid or expired link" }
							}
						}
					}
				}
			}
		},
		"/api/links/{token}/confirm": {
			"post": {
				"tags": ["Links"],
				"description": "Confirm a loan by token (requires authentication)",
				"parameters": [
					{
						"schema": { "type": "string" },
						"in": "path",
						"name": "token",
						"required": true,
						"description": "Loan confirmation token"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Loan confirmed successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Loan confirmed successfully",
									"type": "object",
									"properties": {
										"loan": { "type": "object" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"400": {
						"description": "Error confirming loan",
						"content": {
							"application/json": {
								"schema": { "description": "Error confirming loan" }
							}
						}
					}
				}
			}
		},
		"/api/dashboard/": {
			"get": {
				"tags": ["Dashboard"],
				"description": "Get dashboard data for the authenticated user",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Dashboard data",
						"content": {
							"application/json": {
								"schema": {
									"description": "Dashboard data",
									"type": "object",
									"properties": {
										"stats": { "type": "object" },
										"recentLoans": { "type": "array" }
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/dashboard/friends": {
			"get": {
				"tags": ["Dashboard"],
				"description": "Get list of friends for the authenticated user",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Friends list",
						"content": {
							"application/json": {
								"schema": {
									"description": "Friends list",
									"type": "object",
									"properties": {
										"friends": {
											"type": "array",
											"items": {
												"type": "object",
												"properties": {
													"id": { "type": "string", "format": "uuid" },
													"name": { "type": "string" }
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		},
		"/api/admin/analytics/dashboard": {
			"get": {
				"tags": ["Admin - Analytics"],
				"description": "Get dashboard statistics (requires ANALYST role or higher)",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Dashboard statistics",
						"content": {
							"application/json": {
								"schema": {
									"description": "Dashboard statistics",
									"type": "object",
									"properties": {
										"totalUsers": { "type": "number" },
										"activeLoans": { "type": "number" },
										"totalLoans": { "type": "number" },
										"averageLoanValue": { "type": "number" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/analytics/users/stats": {
			"get": {
				"tags": ["Admin - Analytics"],
				"description": "Get user statistics (requires ANALYST role or higher)",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "User statistics",
						"content": {
							"application/json": {
								"schema": {
									"description": "User statistics",
									"type": "object",
									"properties": {
										"totalUsers": { "type": "number" },
										"newUsersThisMonth": { "type": "number" },
										"activeUsers": { "type": "number" },
										"blockedUsers": { "type": "number" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/analytics/loans/stats": {
			"get": {
				"tags": ["Admin - Analytics"],
				"description": "Get loan statistics (requires ANALYST role or higher)",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Loan statistics",
						"content": {
							"application/json": {
								"schema": {
									"description": "Loan statistics",
									"type": "object",
									"properties": {
										"totalLoans": { "type": "number" },
										"activeLoans": { "type": "number" },
										"returnedLoans": { "type": "number" },
										"cancelledLoans": { "type": "number" },
										"averageLoanDuration": { "type": "number" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/users/": {
			"get": {
				"tags": ["Admin - Users"],
				"description": "List all users (requires ANALYST role or higher)",
				"parameters": [
					{
						"schema": { "type": "number", "default": 1 },
						"in": "query",
						"name": "page",
						"required": false,
						"description": "Page number"
					},
					{
						"schema": { "type": "number", "default": 50 },
						"in": "query",
						"name": "limit",
						"required": false,
						"description": "Results per page (max 100)"
					},
					{
						"schema": { "type": "string" },
						"in": "query",
						"name": "search",
						"required": false,
						"description": "Search by name or email"
					},
					{
						"schema": { "type": "string" },
						"in": "query",
						"name": "role",
						"required": false,
						"description": "Filter by role"
					},
					{
						"schema": { "type": "boolean" },
						"in": "query",
						"name": "isActive",
						"required": false,
						"description": "Filter by active status"
					},
					{
						"schema": {
							"type": "string",
							"enum": ["createdAt", "lastActivity"],
							"default": "createdAt"
						},
						"in": "query",
						"name": "sortBy",
						"required": false
					},
					{
						"schema": {
							"type": "string",
							"enum": ["asc", "desc"],
							"default": "desc"
						},
						"in": "query",
						"name": "sortOrder",
						"required": false
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Users list",
						"content": {
							"application/json": {
								"schema": {
									"description": "Users list",
									"type": "object",
									"properties": {
										"users": { "type": "array" },
										"total": { "type": "number" },
										"page": { "type": "number" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/users/{id}": {
			"get": {
				"tags": ["Admin - Users"],
				"description": "Get user details (requires SUPPORT role or higher)",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "User ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "User details",
						"content": {
							"application/json": {
								"schema": { "description": "User details", "type": "object" }
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					},
					"404": {
						"description": "User not found",
						"content": {
							"application/json": {
								"schema": { "description": "User not found" }
							}
						}
					}
				}
			}
		},
		"/api/admin/users/{id}/block": {
			"post": {
				"tags": ["Admin - Users"],
				"description": "Block a user (requires SUPER_ADMIN role)",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["reason"],
								"properties": {
									"reason": {
										"type": "string",
										"minLength": 10,
										"description": "Block reason (minimum 10 characters)"
									}
								}
							}
						}
					},
					"required": true
				},
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "User ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "User blocked successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "User blocked successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/users/{id}/unblock": {
			"post": {
				"tags": ["Admin - Users"],
				"description": "Unblock a user (requires SUPER_ADMIN role)",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "User ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "User unblocked successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "User unblocked successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/moderation/items/{id}": {
			"get": {
				"tags": ["Admin - Moderation"],
				"description": "Get item details for moderation (requires SUPPORT role or higher)",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Item ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Item details",
						"content": {
							"application/json": {
								"schema": { "description": "Item details", "type": "object" }
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					},
					"404": {
						"description": "Item not found",
						"content": {
							"application/json": {
								"schema": { "description": "Item not found" }
							}
						}
					}
				}
			},
			"delete": {
				"tags": ["Admin - Moderation"],
				"description": "Remove an item (requires MODERATOR role or higher)",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["reason"],
								"properties": {
									"reason": {
										"type": "string",
										"minLength": 10,
										"description": "Removal reason (minimum 10 characters)"
									}
								}
							}
						}
					},
					"required": true
				},
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Item ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Item removed successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Item removed successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/moderation/loans/{id}": {
			"get": {
				"tags": ["Admin - Moderation"],
				"description": "Get loan details for moderation (requires SUPPORT role or higher)",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Loan ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Loan details",
						"content": {
							"application/json": {
								"schema": { "description": "Loan details", "type": "object" }
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					},
					"404": {
						"description": "Loan not found",
						"content": {
							"application/json": {
								"schema": { "description": "Loan not found" }
							}
						}
					}
				}
			}
		},
		"/api/admin/moderation/loans/{id}/cancel": {
			"post": {
				"tags": ["Admin - Moderation"],
				"description": "Cancel a loan for moderation (requires MODERATOR role or higher)",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["reason"],
								"properties": {
									"reason": {
										"type": "string",
										"minLength": 10,
										"description": "Cancellation reason (minimum 10 characters)"
									}
								}
							}
						}
					},
					"required": true
				},
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Loan ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Loan cancelled successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Loan cancelled successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/admins/": {
			"get": {
				"tags": ["Admin - Admins"],
				"description": "List all admin users (requires SUPER_ADMIN role)",
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Admin users list",
						"content": {
							"application/json": {
								"schema": {
									"description": "Admin users list",
									"type": "array",
									"items": {
										"type": "object",
										"properties": {
											"id": { "type": "string", "format": "uuid" },
											"email": { "type": "string", "format": "email" },
											"role": { "type": "string" },
											"createdAt": { "type": "string", "format": "date-time" }
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			},
			"post": {
				"tags": ["Admin - Admins"],
				"description": "Promote a user to admin (requires SUPER_ADMIN role)",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["userId", "role"],
								"properties": {
									"userId": {
										"type": "string",
										"format": "uuid",
										"description": "User ID to promote"
									},
									"role": {
										"type": "string",
										"enum": ["ANALYST", "SUPPORT", "MODERATOR", "SUPER_ADMIN"],
										"description": "Admin role"
									}
								}
							}
						}
					},
					"required": true
				},
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "User promoted successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "User promoted successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/admins/{id}/role": {
			"patch": {
				"tags": ["Admin - Admins"],
				"description": "Change an admin role (requires SUPER_ADMIN role)",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"required": ["role"],
								"properties": {
									"role": {
										"type": "string",
										"enum": ["ANALYST", "SUPPORT", "MODERATOR", "SUPER_ADMIN"],
										"description": "New admin role"
									}
								}
							}
						}
					},
					"required": true
				},
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Admin user ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Admin role changed successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Admin role changed successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/admins/{id}": {
			"delete": {
				"tags": ["Admin - Admins"],
				"description": "Remove an admin (requires SUPER_ADMIN role)",
				"parameters": [
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "path",
						"name": "id",
						"required": true,
						"description": "Admin user ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Admin removed successfully",
						"content": {
							"application/json": {
								"schema": {
									"description": "Admin removed successfully",
									"type": "object",
									"properties": {
										"success": { "type": "boolean" },
										"message": { "type": "string" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		},
		"/api/admin/admins/audit-log": {
			"get": {
				"tags": ["Admin - Admins"],
				"description": "Get audit log (requires SUPER_ADMIN role)",
				"parameters": [
					{
						"schema": { "type": "number", "default": 1 },
						"in": "query",
						"name": "page",
						"required": false,
						"description": "Page number"
					},
					{
						"schema": { "type": "number", "default": 50 },
						"in": "query",
						"name": "limit",
						"required": false,
						"description": "Results per page (max 100)"
					},
					{
						"schema": { "type": "string" },
						"in": "query",
						"name": "action",
						"required": false,
						"description": "Filter by action type"
					},
					{
						"schema": { "type": "string", "format": "uuid" },
						"in": "query",
						"name": "adminId",
						"required": false,
						"description": "Filter by admin ID"
					}
				],
				"security": [{ "BearerAuth": [] }],
				"responses": {
					"200": {
						"description": "Audit log entries",
						"content": {
							"application/json": {
								"schema": {
									"description": "Audit log entries",
									"type": "object",
									"properties": {
										"logs": { "type": "array" },
										"total": { "type": "number" },
										"page": { "type": "number" }
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": { "description": "Unauthorized" }
							}
						}
					},
					"403": {
						"description": "Insufficient permissions",
						"content": {
							"application/json": {
								"schema": { "description": "Insufficient permissions" }
							}
						}
					}
				}
			}
		}
	},
	"servers": [{ "url": "http://localhost:5173", "description": "Development" }],
	"tags": [
		{ "name": "Authentication", "description": "Authentication endpoints" },
		{ "name": "OAuth", "description": "OAuth authentication providers" },
		{ "name": "Items", "description": "Items management endpoints" },
		{ "name": "Upload", "description": "Image upload endpoints" },
		{ "name": "Loans", "description": "Loan management endpoints" },
		{ "name": "Links", "description": "Public loan link endpoints" },
		{ "name": "Dashboard", "description": "User dashboard endpoints" },
		{ "name": "Admin - Analytics", "description": "Admin analytics endpoints" },
		{
			"name": "Admin - Users",
			"description": "Admin user management endpoints"
		},
		{
			"name": "Admin - Moderation",
			"description": "Admin content moderation endpoints"
		},
		{
			"name": "Admin - Admins",
			"description": "Admin role management endpoints"
		},
		{ "name": "Health", "description": "Health check endpoints" }
	]
}
